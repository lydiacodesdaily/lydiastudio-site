@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply text-nearBlack font-sans antialiased;
    background-color: #fcfcfc;
  }

  ::selection {
    @apply bg-accent-light text-nearBlack;
  }
}

@layer components {
  .editorial-grid {
    display: grid;
    grid-template-columns: 1fr min(720px, 100%) 1fr;
    padding-inline: 1.5rem;
  }

  .editorial-grid > * {
    grid-column: 2;
  }

  .editorial-grid > .full-bleed {
    grid-column: 1 / -1;
    width: 100%;
  }

  .editorial-grid > .breakout {
    grid-column: 1 / -1;
    width: min(1100px, 100%);
    margin-inline: auto;
    padding-inline: 1.5rem;
  }

  /* Card component with hover lift */
  .card {
    @apply bg-surface rounded-xl border border-border shadow-card;
    @apply transition-all duration-300 ease-out-expo;
  }

  .card:hover {
    @apply shadow-card-hover border-accent/20;
    transform: translateY(-2px);
  }

  /* Link with animated underline */
  .link-underline {
    @apply relative;
  }

  .link-underline::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-px bg-accent;
    @apply transition-all duration-300 ease-out-expo;
  }

  .link-underline:hover::after {
    @apply w-full;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Subtle entrance animation */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.6s cubic-bezier(0.19, 1, 0.22, 1) forwards;
  }

  .animate-delay-100 { animation-delay: 100ms; }
  .animate-delay-200 { animation-delay: 200ms; }
  .animate-delay-300 { animation-delay: 300ms; }
  .animate-delay-400 { animation-delay: 400ms; }

  /* Scroll-driven reveal animation */
  @keyframes reveal {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Progressive enhancement: scroll-driven animations */
  @supports (animation-timeline: view()) {
    .reveal-on-scroll {
      animation: reveal linear both;
      animation-timeline: view();
      animation-range: entry 0% entry 35%;
    }
  }

  /* Fallback for browsers without scroll-driven animation support */
  @supports not (animation-timeline: view()) {
    .reveal-on-scroll {
      animation: fade-in 0.6s cubic-bezier(0.19, 1, 0.22, 1) forwards;
    }
  }

  /* Horizontal rule styling - minimal line */
  .editorial-hr {
    @apply w-full h-px bg-border my-12;
  }

  /* Accent line for emphasis */
  .accent-line {
    @apply w-12 h-0.5 bg-accent;
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .animate-fade-in,
    .reveal-on-scroll {
      animation: none;
      opacity: 1;
      transform: none;
    }

    .card:hover {
      transform: none;
    }
  }

  /* Variable font weight on hover */
  .hover-weight {
    transition: font-weight 0.2s ease;
  }

  .hover-weight:hover {
    font-weight: 500;
  }

  /* Focus visible styles for accessibility */
  .focus-ring {
    @apply outline-none;
  }

  .focus-ring:focus-visible {
    @apply ring-2 ring-accent ring-offset-2 ring-offset-background;
  }
}
